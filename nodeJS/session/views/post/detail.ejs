<!DOCTYPE html>
<html lang="ko">
    <head>
        <%- include('../partials/head.ejs') %>
    </head>
    <body>
        <%- include('../partials/nav.ejs') %>
        <main>
            <h2><%= post.title %></h2>
            <p><%= post.content %></p>
            <p><%= post.author %></p>
            <p><%= post.createdAt %></p>

            <a href="/posts/<%= post.shortId %>/edit">수정하기</a>
            <button onclick="deletePost">삭제하기</button>
        </main>
    </body>
    <script>
        const deletePost = () => {
            fetch('/posts/<%= post.shortId %>', {method: 'delete'})
                .then((res) => {
                    if(res.ok){
                        alert('삭제되었습니다.')
                        window.location.href = '/posts'
                    } else{
                        alert('오류가 발생했습니다.')
                    }
                })
                .catch((err) => {
                    alert('오류가 발생했습니다.')
                })
        }
    </script>
</html>
